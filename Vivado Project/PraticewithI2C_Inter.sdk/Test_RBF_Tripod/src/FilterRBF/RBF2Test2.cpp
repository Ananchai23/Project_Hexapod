//
// File: RBF2Test2.cpp
//
// MATLAB Coder version            : 3.3
// C/C++ source code generated on  : 18-May-2018 16:04:25
//

// Include Files
#include "rt_nonfinite.h"
#include "MvAvgFilter2.h"
#include "RBF2Test2.h"

// Function Definitions

//
// Arguments    : const double data_TE[18]
// Return Type  : double
//
double RBF2Test2(const double data_TE[18])
{
  double WalkControls;
  double y;
  int j;
  double d0;
  int i1;
  static const double a[18] = { -0.80056854295534, -0.222684484499186,
    0.0532628868417608, 0.577195206026291, 0.272924804705975, 0.227467331399771,
    0.430339212632465, -0.414631345447428, 1.7442499369983, 0.818024982935328,
    2.19027130759926, -0.348927951594107, 4.17488034823257, -0.862706954821487,
    -4.75586723220551, -0.799849740945625, -2.42282012960957, -1.18246209114903
  };

  static const double dv0[18] = { 0.0808355425178039, 0.0580493504720154,
    0.0575666269470419, 0.0786406230466525, 0.0658919099728167,
    0.0610393700945463, 0.0776332091213201, 0.0585688575239242,
    0.0846865324847772, 0.0766868907614552, 0.0853400740493565,
    0.00410108453221938, 0.112357314448927, 0.0738000823918864,
    0.102232888852968, 0.136925134338426, 0.071441289339137, 0.120745976611961 };

  static const double c[324] = { 0.163313853603516, 0.0546701014492754,
    0.0972557391304348, 0.156360246376812, 0.149730101449275, 0.0879057536231884,
    0.150976826086957, 0.125533028985507, 0.0815872753623188, 0.173091333333333,
    0.105189376811594, 0.0750846231884059, 0.167892072463768, 0.135067449275362,
    0.0845056376811594, 0.160185376811594, 0.0903142028985507,
    0.0785555072463768, 0.141051754388611, 0.0627878260869566,
    0.0706929130434783, 0.187924173913044, 0.137234869565217, 0.0807372898550725,
    0.164463811594203, 0.139487420289855, 0.0671512173913044, 0.180953927536232,
    0.108065260869565, 0.0623911014492754, 0.17010215942029, 0.143737507246377,
    0.0857239855072464, 0.20608615942029, 0.111876275362319, 0.067094463768116,
    0.0983469504980665, 0.0614135797101449, 0.0566393188405797,
    0.192613289855073, 0.158017826086957, 0.0792922173913044, 0.162721246376812,
    0.131114768115942, 0.0709904347826087, 0.157493594202899, 0.0992534202898551,
    0.0656635942028986, 0.136569130434783, 0.135733246376812, 0.101321753623188,
    0.213056173913044, 0.0857099275362319, 0.0693611884057971, 0.212714376446579,
    0.0838114637681159, 0.0791647101449275, 0.200178449275362, 0.163061202898551,
    0.0821539420289855, 0.171589739130435, 0.14797347826087, 0.0700695217391305,
    0.185459072463768, 0.103276884057971, 0.0794338550724638, 0.178715695652174,
    0.123663086956522, 0.0757787971014493, 0.223908086956522, 0.11982384057971,
    0.080879, 0.173662182731259, 0.0843639130434783, 0.0823238695652174,
    0.194384202898551, 0.137135710144928, 0.0743479710144928, 0.174309695652174,
    0.17157552173913, 0.0730305072463768, 0.155467724637681, 0.0866166086956522,
    0.0714012173913044, 0.232464956521739, 0.159363652173913, 0.0742770724637681,
    0.215124579710145, 0.125575492753623, 0.0767422608695652, 0.114748016525329,
    0.0731296811594203, 0.0764587971014493, 0.195871782608696, 0.143156666666667,
    0.0828906811594203, 0.156133536231884, 0.129173942028986, 0.0791364347826087,
    0.133452347826087, 0.0795047391304348, 0.0744187536231885, 0.18941168115942,
    0.145253405797101, 0.0786405507246377, 0.182399014492754, 0.119441260869565,
    0.084477347826087, 0.1539113011902, 0.0654086521739131, 0.0881891014492754,
    0.150820985507246, 0.130293115942029, 0.0699704202898551, 0.141739942028985,
    0.156742753623188, 0.0787397246376812, 0.216980434782609, 0.106336884057971,
    0.0725345362318841, 0.222944666666667, 0.132063884057971, 0.0739938115942029,
    0.206681130434783, 0.107852753623188, 0.0694178550724638, 0.134193250214919,
    0.0706079710144928, 0.0609603188405797, 0.172297956521739, 0.132899826086957,
    0.0622777391304348, 0.158031884057971, 0.145239144927536, 0.0670804057971015,
    0.148681782608696, 0.111252724637681, 0.062646115942029, 0.192046623188406,
    0.151316797101449, 0.0715146376811594, 0.187853246376812, 0.0992534202898551,
    0.0690070434782608, 0.217836183982187, 0.0855682608695652,
    0.0797597391304348, 0.203720202898551, 0.140238289855073, 0.0847748550724637,
    0.189057362318841, 0.169266260869565, 0.0786830869565217, 0.198407608695652,
    0.093728347826087, 0.0705229565217392, 0.173133913043478, 0.112612855072464,
    0.0694319855072464, 0.23328652173913, 0.125589724637681, 0.0935866231884058,
    0.28596287953762, 0.100046826086957, 0.072917115942029, 0.162055376811594,
    0.16204115942029, 0.0838256666666667, 0.220281260869565, 0.123577898550725,
    0.056455231884058, 0.139005710144928, 0.0733280434782609, 0.0508025797101449,
    0.199540985507246, 0.120319579710145, 0.0655645072463768, 0.203054304347826,
    0.12618468115942, 0.0871548550724638, 0.188102523305902, 0.104750231884058,
    0.0672787101449276, 0.164520391304348, 0.115828768115942, 0.101605144927536,
    0.176420608695652, 0.116168739130435, 0.0574893188405797, 0.109028550724638,
    0.0677887246376812, 0.0715712753623189, 0.175655550724638, 0.158244405797101,
    0.0929774347826087, 0.187031507246377, 0.11293868115942, 0.0971992173913043,
    0.18398240744944, 0.0996501449275362, 0.0677320434782609, 0.161446188405797,
    0.115927942028986, 0.101180130434783, 0.180727362318841, 0.118860449275362,
    0.0583959855072464, 0.117897028985507, 0.0685537391304348,
    0.0734979710144928, 0.184127362318841, 0.156232695652174, 0.0949891304347826,
    0.185699826086957, 0.107810275362319, 0.0941391594202899, 0.18071917061615,
    0.0766288985507247, 0.087919884057971, 0.186096608695652, 0.123252217391304,
    0.0652528550724638, 0.20332363768116, 0.156105217391304, 0.0778471739130435,
    0.177114724637681, 0.0896623768115942, 0.096023347826087, 0.168373782608696,
    0.124031434782609, 0.0827064492753624, 0.221358057971015, 0.087891652173913,
    0.0675336956521739, 0.219403014492754, 0.0707779420289855,
    0.0950883913043478, 0.216173, 0.15375352173913, 0.0966891739130435,
    0.214543797101449, 0.203224376811594, 0.114822869565217, 0.240752492753623,
    0.0786829710144927, 0.0899173768115942, 0.221570536231884, 0.139558449275362,
    0.103914275362319, 0.229220695652174, 0.135308144927536, 0.0874524202898551,
    0.213792884057971, 0.100443420289855, 0.0801989710144928, 0.202133579710145,
    0.133806521739131, 0.108674362318841, 0.220238768115942, 0.150863463768116,
    0.0778330434782608, 0.147888376811594, 0.0883307101449276, 0.113873695652174,
    0.176703942028986, 0.12829568115942, 0.107342739130435, 0.190332463768116,
    0.109127739130435, 0.0760763333333334, 0.229574942028985, 0.108065202898551,
    0.123379594202899, 0.179650724637681, 0.179650652173913, 0.0759346376811594,
    0.216810492753623, 0.189213246376812, 0.101562623188406, 0.262172826086956,
    0.10710184057971, 0.0916457826086957, 0.291484231884058, 0.18292331884058,
    0.0912915652173913, 0.279442376811594, 0.156700188405797, 0.113307086956522,
    0.194171724637681, 0.104622710144928, 0.0969583913043479, 0.169110434782609,
    0.127813898550725, 0.0771388260869565, 0.186337376811594, 0.18759831884058,
    0.0857240289855072, 0.175471333333333, 0.119186275362319, 0.0962075652173913,
    0.176137362318841, 0.135067405797101, 0.109680202898551, 0.231969014492754,
    0.106846855072464, 0.0811481014492754, 0.200376826086957, 0.0942242173913044,
    0.0923541014492754, 0.292617507246377, 0.148370144927536, 0.0912207971014493,
    0.24473331884058, 0.177695594202899, 0.0713303913043478, 0.197430115942029,
    0.063326115942029, 0.0582119420289855, 0.266082884057971, 0.176633072463768,
    0.0999901594202899, 0.235071710144927, 0.117047, 0.0878348405797102 };

  // 'RBF2Test2:3' w= [-0.800568542955340,-0.222684484499186,0.0532628868417608,0.577195206026291,0.272924804705975,0.227467331399771,0.430339212632465,-0.414631345447428,1.74424993699830,0.818024982935328,2.19027130759926,-0.348927951594107,4.17488034823257,-0.862706954821487,-4.75586723220551,-0.799849740945625,-2.42282012960957,-1.18246209114903]; 
  // 'RBF2Test2:4' spread = [0.0808355425178039,0.0580493504720154,0.0575666269470419,0.0786406230466525,0.0658919099728167,0.0610393700945463,0.0776332091213201,0.0585688575239242,0.0846865324847772,0.0766868907614552,0.0853400740493565,0.00410108453221938,0.112357314448927,0.0738000823918864,0.102232888852968,0.136925134338426,0.0714412893391370,0.120745976611961]; 
  // 'RBF2Test2:5' c = [0.163313853603516,0.141051754388611,0.0983469504980665,0.212714376446579,0.173662182731259,0.114748016525329,0.153911301190200,0.134193250214919,0.217836183982187,0.285962879537620,0.188102523305902,0.183982407449440,0.180719170616150,0.219403014492754,0.213792884057971,0.229574942028985,0.194171724637681,0.200376826086957;0.0546701014492754,0.0627878260869566,0.0614135797101449,0.0838114637681159,0.0843639130434783,0.0731296811594203,0.0654086521739131,0.0706079710144928,0.0855682608695652,0.100046826086957,0.104750231884058,0.0996501449275362,0.0766288985507247,0.0707779420289855,0.100443420289855,0.108065202898551,0.104622710144928,0.0942242173913044;0.0972557391304348,0.0706929130434783,0.0566393188405797,0.0791647101449275,0.0823238695652174,0.0764587971014493,0.0881891014492754,0.0609603188405797,0.0797597391304348,0.0729171159420290,0.0672787101449276,0.0677320434782609,0.0879198840579710,0.0950883913043478,0.0801989710144928,0.123379594202899,0.0969583913043479,0.0923541014492754;0.156360246376812,0.187924173913044,0.192613289855073,0.200178449275362,0.194384202898551,0.195871782608696,0.150820985507246,0.172297956521739,0.203720202898551,0.162055376811594,0.164520391304348,0.161446188405797,0.186096608695652,0.216173000000000,0.202133579710145,0.179650724637681,0.169110434782609,0.292617507246377;0.149730101449275,0.137234869565217,0.158017826086957,0.163061202898551,0.137135710144928,0.143156666666667,0.130293115942029,0.132899826086957,0.140238289855073,0.162041159420290,0.115828768115942,0.115927942028986,0.123252217391304,0.153753521739130,0.133806521739131,0.179650652173913,0.127813898550725,0.148370144927536;0.0879057536231884,0.0807372898550725,0.0792922173913044,0.0821539420289855,0.0743479710144928,0.0828906811594203,0.0699704202898551,0.0622777391304348,0.0847748550724637,0.0838256666666667,0.101605144927536,0.101180130434783,0.0652528550724638,0.0966891739130435,0.108674362318841,0.0759346376811594,0.0771388260869565,0.0912207971014493;0.150976826086957,0.164463811594203,0.162721246376812,0.171589739130435,0.174309695652174,0.156133536231884,0.141739942028985,0.158031884057971,0.189057362318841,0.220281260869565,0.176420608695652,0.180727362318841,0.203323637681160,0.214543797101449,0.220238768115942,0.216810492753623,0.186337376811594,0.244733318840580;0.125533028985507,0.139487420289855,0.131114768115942,0.147973478260870,0.171575521739130,0.129173942028986,0.156742753623188,0.145239144927536,0.169266260869565,0.123577898550725,0.116168739130435,0.118860449275362,0.156105217391304,0.203224376811594,0.150863463768116,0.189213246376812,0.187598318840580,0.177695594202899;0.0815872753623188,0.0671512173913044,0.0709904347826087,0.0700695217391305,0.0730305072463768,0.0791364347826087,0.0787397246376812,0.0670804057971015,0.0786830869565217,0.0564552318840580,0.0574893188405797,0.0583959855072464,0.0778471739130435,0.114822869565217,0.0778330434782608,0.101562623188406,0.0857240289855072,0.0713303913043478;0.173091333333333,0.180953927536232,0.157493594202899,0.185459072463768,0.155467724637681,0.133452347826087,0.216980434782609,0.148681782608696,0.198407608695652,0.139005710144928,0.109028550724638,0.117897028985507,0.177114724637681,0.240752492753623,0.147888376811594,0.262172826086956,0.175471333333333,0.197430115942029;0.105189376811594,0.108065260869565,0.0992534202898551,0.103276884057971,0.0866166086956522,0.0795047391304348,0.106336884057971,0.111252724637681,0.0937283478260870,0.0733280434782609,0.0677887246376812,0.0685537391304348,0.0896623768115942,0.0786829710144927,0.0883307101449276,0.107101840579710,0.119186275362319,0.0633261159420290;0.0750846231884059,0.0623911014492754,0.0656635942028986,0.0794338550724638,0.0714012173913044,0.0744187536231885,0.0725345362318841,0.0626461159420290,0.0705229565217392,0.0508025797101449,0.0715712753623189,0.0734979710144928,0.0960233478260870,0.0899173768115942,0.113873695652174,0.0916457826086957,0.0962075652173913,0.0582119420289855;0.167892072463768,0.170102159420290,0.136569130434783,0.178715695652174,0.232464956521739,0.189411681159420,0.222944666666667,0.192046623188406,0.173133913043478,0.199540985507246,0.175655550724638,0.184127362318841,0.168373782608696,0.221570536231884,0.176703942028986,0.291484231884058,0.176137362318841,0.266082884057971;0.135067449275362,0.143737507246377,0.135733246376812,0.123663086956522,0.159363652173913,0.145253405797101,0.132063884057971,0.151316797101449,0.112612855072464,0.120319579710145,0.158244405797101,0.156232695652174,0.124031434782609,0.139558449275362,0.128295681159420,0.182923318840580,0.135067405797101,0.176633072463768;0.0845056376811594,0.0857239855072464,0.101321753623188,0.0757787971014493,0.0742770724637681,0.0786405507246377,0.0739938115942029,0.0715146376811594,0.0694319855072464,0.0655645072463768,0.0929774347826087,0.0949891304347826,0.0827064492753624,0.103914275362319,0.107342739130435,0.0912915652173913,0.109680202898551,0.0999901594202899;0.160185376811594,0.206086159420290,0.213056173913044,0.223908086956522,0.215124579710145,0.182399014492754,0.206681130434783,0.187853246376812,0.233286521739130,0.203054304347826,0.187031507246377,0.185699826086957,0.221358057971015,0.229220695652174,0.190332463768116,0.279442376811594,0.231969014492754,0.235071710144927;0.0903142028985507,0.111876275362319,0.0857099275362319,0.119823840579710,0.125575492753623,0.119441260869565,0.107852753623188,0.0992534202898551,0.125589724637681,0.126184681159420,0.112938681159420,0.107810275362319,0.0878916521739130,0.135308144927536,0.109127739130435,0.156700188405797,0.106846855072464,0.117047000000000;0.0785555072463768,0.0670944637681160,0.0693611884057971,0.0808790000000000,0.0767422608695652,0.0844773478260870,0.0694178550724638,0.0690070434782608,0.0935866231884058,0.0871548550724638,0.0971992173913043,0.0941391594202899,0.0675336956521739,0.0874524202898551,0.0760763333333334,0.113307086956522,0.0811481014492754,0.0878348405797102]; 
  // 'RBF2Test2:6' num_in = 18;
  //  Select 18(Torque) + 3 (Gyro)
  // 'RBF2Test2:7' g = zeros(num_in,1);
  // 'RBF2Test2:9' x = data_TE(1:num_in,1);
  // 'RBF2Test2:10' for j = 1:num_in
  // 'RBF2Test2:13' WalkControls = mysign(w*g);
  y = 0.0;
  for (j = 0; j < 18; j++) {
    // 'RBF2Test2:11' g(j,:) = exp(-(x-c(:,j))'*(x-c(:,j))/(2*spread(j)^2));
    d0 = 0.0;
    for (i1 = 0; i1 < 18; i1++) {
      d0 += -(data_TE[i1] - c[i1 + 18 * j]) * (data_TE[i1] - c[i1 + 18 * j]);
    }

    y += a[j] * std::exp(d0 / (2.0 * (dv0[j] * dv0[j])));
  }

  //  a signsum function
  // 'mysign:4' out = 1*(d>=0) + (-1)*(d<0);
  WalkControls = (y >= 0.0) - (y < 0.0);

  //  if distance(d,1) <= distance(d,0),
  //      out = 1;
  //  else
  //      out = 0;
  //  end
  return WalkControls;
}

//
// File trailer for RBF2Test2.cpp
//
// [EOF]
//
